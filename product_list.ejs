<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
</head>
<body>
    <div class="container">
        <h2 class="text-center">Product-list</h2>

                <% if (success && success.length > 0) { %>
    <div id="flash-msg" class="alert alert-success text-center">
        <%= success[0] %>
    </div>
<% } %>

<% if (error && error.length > 0) { %>
    <div id="flash-msg" class="alert alert-danger text-center">
        <%= error[0] %>
    </div>
<% } %>

 

        <a href="/product/add" class="btn bg-info">Add product</a>
        <a href="/dashboard" class="btn bg-success">back-Dashboard</a>
        <table class="table">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Name</th>
      <th scope="col">slug</th>
      <th scope="col">category</th>
      <th scope="col">description</th>
      <th scope="col">image</th>
      <th colspan="3">Action</th>
    </tr>
  </thead>
  <tbody>
    <% for(let i=0; i<product.length ;i++){%>
    <tr>
      <th scope="row"><%=i+1%></th>
      <td><%=product[i].name%></td>
      <td><%=product[i].slug%></td>
      <td><%= product[i].category.name %></td>
      <td><%=product[i].description%></td>
      <td><img src="/uploads/<%=product[i].image%>" alt="" width="50px"></td>
      <td><a href="/product/edit/<%=product[i]._id%>" class="btn bg-warning">Edit</a></td>
      <td><a href="/product/delete/<%=product[i]._id%>" class="btn bg-danger">Delete</a></td>
      <td><a href="/product/softDelete/<%=product[i]._id%>" class="btn bg-secondary">Soft Delete</a></td>
      
    </tr>
   
    
    <%}%>
  </tbody>
</table>
    </div>
        <script>
    // Auto-hide after 3 seconds
    setTimeout(() => {
        const flash = document.getElementById('flash-msg');
        if (flash) {
            flash.style.transition = "opacity 0.5s ease";
            flash.style.opacity = "0";
            setTimeout(() => flash.remove(), 500);
        }
    }, 2000);
</script>
</body>
</html>